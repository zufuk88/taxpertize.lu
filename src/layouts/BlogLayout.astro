---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import '../styles/global.css';
import '../styles/blog-article.css';

export interface Props {
  title: string;
  description?: string;
  author?: string;
  date?: string;
  category?: string;
  readTime?: string;
  image?: string;
}

const {
  title,
  description = "Taxpertize Blog - Tax insights and updates from Luxembourg",
  author,
  date,
  category,
  readTime,
  image
} = Astro.props;

const formattedDate = date ? new Date(date).toLocaleDateString('en-GB', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
}) : '';
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

    <!-- Preconnect to Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Google Font: Playfair Display (Times New Roman equivalent) -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

    <meta name="generator" content={Astro.generator} />
    <title>{title} | Taxpertize Blog</title>

    <!-- Open Graph -->
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    {image && <meta property="og:image" content={image} />}
    <meta property="og:type" content="article" />

    <!-- Breadcrumbs Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://taxpertize.lu"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Blog",
          "item": "https://taxpertize.lu/blog"
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": ${JSON.stringify(title)}
        }
      ]
    }
    </script>

    <!-- Article Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "headline": ${JSON.stringify(title)},
      "description": ${JSON.stringify(description)},
      "author": {
        "@type": "Person",
        "name": ${JSON.stringify(author || "Taxpertize Team")}
      },
      "datePublished": ${JSON.stringify(date)},
      "publisher": {
        "@type": "Organization",
        "name": "Taxpertize",
        "logo": {
          "@type": "ImageObject",
          "url": "https://taxpertize.lu/logo.png"
        }
      },
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": ${JSON.stringify(`https://taxpertize.lu${Astro.url.pathname}`)}
      }
    }
    </script>
  </head>
  <body>
    <Header />

    <article class="blog-article">
      <div class="article-container">
        <!-- Breadcrumbs -->
        <nav class="breadcrumbs" aria-label="Breadcrumb">
          <a href="/" class="breadcrumb-link">Home</a>
          <span class="breadcrumb-separator">/</span>
          <a href="/blog" class="breadcrumb-link">Blog</a>
          <span class="breadcrumb-separator">/</span>
          <span class="breadcrumb-current">{title}</span>
        </nav>

        {(author || date || category || readTime) && (
          <header class="article-header">
            <div class="article-meta">
              {category && (
                <a href={`/blog/category/${category.toLowerCase().replace(/\s+/g, '-')}`} class="article-category">
                  {category}
                </a>
              )}
              {date && <span class="article-date">{formattedDate}</span>}
              {readTime && <span class="article-read-time">{readTime} read</span>}
            </div>
            <h1 class="article-title">{title}</h1>
            {description && <p class="article-description">{description}</p>}
            {author && (
              <div class="article-author">
                <span>By {author}</span>
              </div>
            )}
          </header>
        )}

        <div class="article-content">
          <slot />
        </div>
      </div>
    </article>

    <Footer />
  </body>
</html>
